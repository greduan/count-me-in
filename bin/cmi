#!/usr/bin/env node

var docopt = require('docopt').docopt;
var path = require('path');
var CountMeIn = require('..');

var doc = 'Usage: cmi [-d DIR] [-r] NAME [NUM]' +
'\n' +
'\nOptions:' +
'\n  -h --help  Show this screen.' +
'\n  -r         NUM removes from the counter instead of increasing it.' +
'\n  -d DIR     The directory where to store the counter(s). [default: ~/.cmi-counters]'
var cli = docopt(doc, {help: true, version: '0.0.0'});
// console.log(cli);

var file = path.join(cli['-d'], cli['NAME']);
// console.log(file);

function appendStrToFile(file, str, cb) {
	fs.appendFile(file, str, function(err){
		if (err) return console.error(err);
		else cb(arguments);
	});
}

function readFile(file, cb) {
	fs.readFile(file, {encoding: 'utf8'}, function(err, data){
		if (err) {
			if (err.code === 'ENOENT')
				return console.error('FILE AND/OR DIRECTORY DOESN\'T EXIST\nThe file will be created but make sure the directory exists...');
			else return console.error(err);
		} else return cb(data);
	});
}

